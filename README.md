# SINATRANS - Disciplina de Banco de dados II

## üìã √çndice

- [Vis√£o Geral](#vis√£o-geral)
- [Estrutura do Banco de Dados](#estrutura-do-banco-de-dados)
- [M√≥dulos do Sistema](#m√≥dulos-do-sistema)
- [Relacionamentos Principais](#relacionamentos-principais)
- [Considera√ß√µes T√©cnicas](#considera√ß√µes-t√©cnicas)

---

## üéØ Vis√£o Geral

O **SINATRANS** √© um sistema completo e integrado para gest√£o de transporte p√∫blico e log√≠stica, desenvolvido para atender empresas de transporte de passageiros e cargas. O sistema contempla desde o gerenciamento de frotas e recursos humanos at√© o controle financeiro e monitoramento em tempo real.

### Principais Funcionalidades:

- ‚úÖ Gest√£o completa de pessoas (passageiros, funcion√°rios, motoristas)
- ‚úÖ Controle de frota e manuten√ß√£o de ve√≠culos
- ‚úÖ Opera√ß√£o de transporte (linhas, rotas, escalas, viagens)
- ‚úÖ Log√≠stica e gest√£o de cargas
- ‚úÖ Monitoramento GPS e seguran√ßa
- ‚úÖ Controle de qualidade e satisfa√ß√£o
- ‚úÖ Gest√£o administrativa e financeira
- ‚úÖ Recursos humanos completo
- ‚úÖ Sistema de bilhetagem eletr√¥nica
- ‚úÖ Gest√£o de terminais e pontos tur√≠sticos

---

## üìä Estrutura do Banco de Dados

O banco de dados est√° organizado em **10 arquivos SQL modulares**, facilitando a manuten√ß√£o e evolu√ß√£o do sistema:

```
CodigosSql/
‚îú‚îÄ‚îÄ 00_banco.sql                              # Cria√ß√£o do banco SINATRANS
‚îú‚îÄ‚îÄ 01_gestao_pessoas.sql                     # M√≥dulo de Gest√£o de Pessoas
‚îú‚îÄ‚îÄ 02_veiculos_frota.sql                     # M√≥dulo de Ve√≠culos e Frota
‚îú‚îÄ‚îÄ 03_operacao_transporte.sql                # M√≥dulo de Opera√ß√£o de Transporte
‚îú‚îÄ‚îÄ 04_logistica_cargas.sql                   # M√≥dulo de Log√≠stica e Cargas
‚îú‚îÄ‚îÄ 05_monitoramento_seguranca.sql            # M√≥dulo de Monitoramento e Seguran√ßa
‚îú‚îÄ‚îÄ 06_controle_qualidade.sql                 # M√≥dulo de Controle de Qualidade
‚îú‚îÄ‚îÄ 07_gestao_operacoes.sql                   # M√≥dulo de Gest√£o de Opera√ß√µes
‚îú‚îÄ‚îÄ 08_gestao_administrativa_financeira.sql   # M√≥dulo Administrativo/Financeiro
‚îú‚îÄ‚îÄ 09_recursos_humanos.sql                   # M√≥dulo de Recursos Humanos
‚îî‚îÄ‚îÄ 10_outros_modulos.sql                     # M√≥dulo de Sistema e Utilidades
```

---

## üîß M√≥dulos do Sistema

### 1Ô∏è‚É£ Gest√£o de Pessoas (01_gestao_pessoas.sql)

**Prop√≥sito:** Gerenciar todos os cadastros de pessoas relacionadas ao sistema.

**Tabelas principais:**
- `passageiro` - Cadastro de passageiros com tipos diferenciados
- `passageiro_estudante` - Informa√ß√µes espec√≠ficas de estudantes
- `passageiro_pcd` - Informa√ß√µes de pessoas com defici√™ncia
- `passageiro_idoso` - Informa√ß√µes de idosos
- `funcionario` - Cadastro geral de funcion√°rios
- `motorista` - Informa√ß√µes espec√≠ficas de motoristas
- `cobrador` - Informa√ß√µes espec√≠ficas de cobradores
- `endereco` - Endere√ßos completos com coordenadas
- `cargo` - Cargos da empresa
- `departamento` - Departamentos organizacionais
- `escala_trabalho` - Escalas de trabalho (6x1, 5x2, 12x36, etc.)

**Recursos:**
- Biometria digital e facial
- Tipos de passageiros (Regular, Estudante, Idoso, PCD)
- Estrutura organizacional completa
- Geolocaliza√ß√£o de endere√ßos

---

### 2Ô∏è‚É£ Ve√≠culos e Frota (02_veiculos_frota.sql)

**Prop√≥sito:** Gerenciar toda a frota de ve√≠culos e manuten√ß√µes.

**Tabelas principais:**
- `veiculo` - Cadastro completo de ve√≠culos
- `modelo_veiculo` - Modelos e especifica√ß√µes t√©cnicas
- `garagem` - Garagens e bases operacionais
- `manutencao` - Registro de manuten√ß√µes (preventiva, corretiva)
- `peca` - Cat√°logo de pe√ßas
- `estoque_peca` - Controle de estoque de pe√ßas
- `movimentacao_estoque` - Movimenta√ß√µes de entrada/sa√≠da
- `servico_manutencao` - Cat√°logo de servi√ßos
- `abastecimento` - Registro de abastecimentos
- `posto_abastecimento` - Postos conveniados
- `pneu` - Controle individual de pneus
- `posicao_pneu` - Posicionamento de pneus nos ve√≠culos
- `historico_calibragem` - Hist√≥rico de calibragens

**Recursos:**
- Suporte a m√∫ltiplos tipos de combust√≠vel
- Controle de quilometragem e consumo
- Gest√£o de vida √∫til de pneus
- Rastreamento de custos de manuten√ß√£o
- Gest√£o de garantias de pe√ßas

---

### 3Ô∏è‚É£ Opera√ß√£o de Transporte (03_operacao_transporte.sql)

**Prop√≥sito:** Gerenciar linhas, rotas, hor√°rios e opera√ß√£o de transporte de passageiros.

**Tabelas principais:**
- `linha_transporte` - Linhas de transporte (urbana, intermunicipal, etc.)
- `rota` - Rotas detalhadas (ida, volta, circular)
- `parada` - Pontos de parada e esta√ß√µes
- `parada_rota` - Associa√ß√£o de paradas √†s rotas
- `horario` - Grade hor√°ria de opera√ß√£o
- `horario_parada` - Hor√°rios previstos em cada parada
- `tarifa` - Tarifas e descontos por tipo
- `cartao_bilhetagem` - Cart√µes de passageiros
- `recarga` - Recargas de cart√µes
- `utilizacao_cartao` - Uso de cart√µes (valida√ß√µes)
- `validador` - Validadores eletr√¥nicos
- `escala` - Escalas de motoristas e ve√≠culos
- `viagem` - Viagens realizadas
- `ponto_viagem` - Controle de passagem por pontos
- `controle_ocupacao` - Monitoramento de lota√ß√£o
- `empresa_operadora` - Empresas operadoras
- `consorcio` - Cons√≥rcios de transporte

**Recursos:**
- Sistema completo de bilhetagem eletr√¥nica
- Controle de integra√ß√£o temporal
- M√∫ltiplos tipos de tarifas
- Monitoramento de ocupa√ß√£o em tempo real
- Gest√£o de cons√≥rcios e empresas operadoras

---

### 4Ô∏è‚É£ Log√≠stica e Cargas (04_logistica_cargas.sql)

**Prop√≥sito:** Gerenciar transporte de cargas e log√≠stica.

**Tabelas principais:**
- `cliente` - Clientes (pessoa f√≠sica/jur√≠dica)
- `tipo_carga` - Tipos de carga com caracter√≠sticas
- `carga` - Cargas registradas
- `volume` - Volumes individuais de carga
- `ordem_transporte` - Ordens de transporte
- `item_ordem_transporte` - Itens das ordens
- `rota_carga` - Rotas de transporte de carga
- `trecho_rota_carga` - Trechos detalhados das rotas
- `operacao_carga` - Opera√ß√µes de transporte executadas
- `ocorrencia_operacao` - Ocorr√™ncias durante opera√ß√µes

**Recursos:**
- Suporte a cargas perigosas e especiais
- Controle de temperatura para cargas refrigeradas
- Rastreamento de volumes por c√≥digo de barras
- Gest√£o completa de rotas e trechos
- Registro de ocorr√™ncias e custos operacionais

---

### 5Ô∏è‚É£ Monitoramento e Seguran√ßa (05_monitoramento_seguranca.sql)

**Prop√≥sito:** Monitorar ve√≠culos em tempo real e gerenciar seguran√ßa.

**Tabelas principais:**
- `veiculo_gps` - Dispositivos GPS instalados
- `rastreamento_gps` - Dados de rastreamento em tempo real
- `evento_gps` - Eventos especiais detectados
- `cerca_eletronica` - Cercas eletr√¥nicas configuradas
- `veiculo_cerca` - Associa√ß√£o de ve√≠culos √†s cercas
- `camera` - C√¢meras de seguran√ßa
- `gravacao` - Grava√ß√µes de v√≠deo
- `incidente_seguranca` - Incidentes registrados
- `ocorrencia_veiculo` - Ocorr√™ncias operacionais

**Recursos:**
- Rastreamento GPS em tempo real
- Detec√ß√£o de eventos (excesso de velocidade, desvio de rota, bot√£o de p√¢nico)
- Cercas eletr√¥nicas com alertas
- Sistema de c√¢meras com grava√ß√£o
- Registro completo de incidentes de seguran√ßa
- Integra√ß√£o com boletins de ocorr√™ncia

---

### 6Ô∏è‚É£ Controle de Qualidade (06_controle_qualidade.sql)

**Prop√≥sito:** Avaliar e monitorar a qualidade dos servi√ßos prestados.

**Tabelas principais:**
- `indicador_desempenho` - KPIs do sistema
- `medicao_indicador` - Medi√ß√µes peri√≥dicas de indicadores
- `pesquisa_satisfacao` - Pesquisas de satisfa√ß√£o
- `questao_pesquisa` - Quest√µes das pesquisas
- `resposta_pesquisa` - Respostas coletadas
- `detalhe_resposta_pesquisa` - Detalhes das respostas
- `reclamacao_sugestao` - Manifesta√ß√µes de usu√°rios
- `acompanhamento_manifestacao` - Acompanhamento de manifesta√ß√µes
- `auditoria_interna` - Auditorias realizadas
- `nao_conformidade` - N√£o conformidades identificadas
- `acao_corretiva_preventiva` - A√ß√µes corretivas/preventivas

**Recursos:**
- Sistema completo de KPIs
- M√∫ltiplos tipos de pesquisas de satisfa√ß√£o
- Gest√£o de reclama√ß√µes, sugest√µes e elogios
- Sistema de auditorias internas
- Controle de n√£o conformidades e a√ß√µes corretivas
- Avalia√ß√£o de efic√°cia das a√ß√µes

---

### 7Ô∏è‚É£ Gest√£o de Opera√ß√µes (07_gestao_operacoes.sql)

**Prop√≥sito:** Gerenciar terminais, turismo e eventos especiais.

**Tabelas principais:**
- `terminal` - Terminais e esta√ß√µes
- `integracao_modal` - Integra√ß√µes entre modais
- `area_aluguel_terminal` - √Åreas comerciais em terminais
- `guia_turistico` - Guias tur√≠sticos cadastrados
- `roteiro_turistico` - Roteiros tur√≠sticos
- `excursao` - Excurs√µes agendadas
- `participante_excursao` - Participantes de excurs√µes
- `ponto_turistico` - Pontos tur√≠sticos cadastrados
- `ponto_roteiro` - Pontos nos roteiros
- `evento_especial` - Eventos que impactam opera√ß√£o
- `planejamento_evento` - Planejamento operacional para eventos

**Recursos:**
- Gest√£o multimodal (√¥nibus, metr√¥, trem, VLT, etc.)
- Sistema completo de turismo
- Gest√£o de √°reas comerciais em terminais
- Planejamento para eventos especiais
- M√∫ltiplos idiomas para guias tur√≠sticos

---

### 8Ô∏è‚É£ Gest√£o Administrativa e Financeira (08_gestao_administrativa_financeira.sql)

**Prop√≥sito:** Gerenciar toda √°rea administrativa e financeira da empresa.

**Tabelas principais:**
- `fornecedor` - Cadastro de fornecedores
- `contrato` - Contratos da empresa
- `aditivo_contratual` - Aditivos de contratos
- `ordem_compra` - Ordens de compra
- `item_ordem_compra` - Itens das ordens
- `nota_fiscal` - Notas fiscais (entrada/sa√≠da)
- `item_nota_fiscal` - Itens das notas
- `conta_pagar` - Contas a pagar
- `conta_receber` - Contas a receber
- `folha_pagamento` - Folhas de pagamento
- `pagamento_funcionario` - Pagamentos individuais
- `centro_custo` - Centros de custo
- `plano_contas` - Plano de contas cont√°bil
- `movimentacao_contabil` - Lan√ßamentos cont√°beis
- `orcamento` - Or√ßamentos por centro de custo

**Recursos:**
- Gest√£o completa de compras e fornecedores
- Controle de contratos e aditivos
- Sistema de contas a pagar e receber
- Folha de pagamento completa
- Contabilidade com plano de contas
- Or√ßamento x Realizado
- M√∫ltiplos centros de custo

---

### 9Ô∏è‚É£ Recursos Humanos (09_recursos_humanos.sql)

**Prop√≥sito:** Gerenciar recursos humanos de forma completa.

**Tabelas principais:**
- `treinamento` - Treinamentos oferecidos
- `participante_treinamento` - Participantes em treinamentos
- `exame_medico` - Exames m√©dicos ocupacionais
- `documento_funcionario` - Documentos dos funcion√°rios
- `dependente` - Dependentes de funcion√°rios
- `habilidade_funcionario` - Habilidades e compet√™ncias
- `ferias` - Controle de f√©rias
- `advertencia_suspensao` - Advert√™ncias e suspens√µes
- `avaliacao_desempenho` - Avalia√ß√µes de desempenho
- `requisicao_pessoal` - Requisi√ß√µes de novas contrata√ß√µes

**Recursos:**
- Gest√£o completa de treinamentos
- Medicina e seguran√ßa do trabalho
- Gest√£o documental de funcion√°rios
- Controle de f√©rias e benef√≠cios
- Sistema de avalia√ß√£o de desempenho
- Processo de recrutamento e sele√ß√£o
- Banco de habilidades

---

### üîü Sistema e Utilidades (10_outros_modulos.sql)

**Prop√≥sito:** M√≥dulos de sistema, seguran√ßa e configura√ß√£o.

**Tabelas principais:**
- `usuario` - Usu√°rios do sistema
- `perfil_acesso` - Perfis de acesso
- `permissao` - Permiss√µes do sistema
- `permissao_perfil` - Associa√ß√£o de permiss√µes a perfis
- `log_sistema` - Logs de auditoria
- `configuracao_sistema` - Configura√ß√µes do sistema
- `notificacao` - Sistema de notifica√ß√µes
- `documento_sistema` - Documentos e manuais
- `relatorio_salvo` - Relat√≥rios salvos/agendados
- `alerta_programado` - Alertas autom√°ticos

**Recursos:**
- Sistema completo de autentica√ß√£o e autoriza√ß√£o
- Controle de permiss√µes granular
- Auditoria completa de opera√ß√µes
- Sistema de notifica√ß√µes
- Gest√£o documental do sistema
- Agendamento de relat√≥rios
- Alertas autom√°ticos configur√°veis

---


## üîó Relacionamentos Principais

### Diagrama de Relacionamentos (Principais entidades) (ainda falta terminar)

```
passageiro (1) ‚îÄ‚îÄ‚Üí (N) cartao_bilhetagem
    ‚Üì
    ‚îî‚îÄ‚îÄ‚Üí (1) passageiro_estudante
    ‚îî‚îÄ‚îÄ‚Üí (1) passageiro_pcd
    ‚îî‚îÄ‚îÄ‚Üí (1) passageiro_idoso

funcionario (1) ‚îÄ‚îÄ‚Üí (1) motorista
           ‚îî‚îÄ‚îÄ‚Üí (1) cobrador
           ‚îî‚îÄ‚îÄ‚Üí (N) viagem

veiculo (1) ‚îÄ‚îÄ‚Üí (N) viagem
        ‚îî‚îÄ‚îÄ‚Üí (N) manutencao
        ‚îî‚îÄ‚îÄ‚Üí (N) abastecimento
        ‚îî‚îÄ‚îÄ‚Üí (1) veiculo_gps

linha_transporte (1) ‚îÄ‚îÄ‚Üí (N) rota
                 ‚îî‚îÄ‚îÄ‚Üí (N) tarifa

rota (1) ‚îÄ‚îÄ‚Üí (N) parada_rota ‚Üê‚îÄ‚îÄ (N) parada
     ‚îî‚îÄ‚îÄ‚Üí (N) horario
     ‚îî‚îÄ‚îÄ‚Üí (N) viagem

viagem (1) ‚îÄ‚îÄ‚Üí (N) ponto_viagem
       ‚îî‚îÄ‚îÄ‚Üí (N) controle_ocupacao

ordem_transporte (1) ‚îÄ‚îÄ‚Üí (N) item_ordem_transporte ‚Üê‚îÄ‚îÄ (N) carga

cliente (1) ‚îÄ‚îÄ‚Üí (N) ordem_transporte
        ‚îî‚îÄ‚îÄ‚Üí (N) carga
```

### Relacionamentos Chave por M√≥dulo

**Gest√£o de Pessoas:**
- Passageiro ‚Üí Passageiro_Detalhe (1:1)
- Passageiro ‚Üí Passageiro_Estudante/PCD/Idoso (1:1 opcional)
- Funcion√°rio ‚Üí Motorista/Cobrador (1:1 especializa√ß√£o)
- Funcion√°rio ‚Üí Cargo/Departamento (N:1)

**Ve√≠culos:**
- Ve√≠culo ‚Üí Modelo_Veiculo (N:1)
- Ve√≠culo ‚Üí Manuten√ß√£o (1:N)
- Manuten√ß√£o ‚Üí Item_Manutencao (1:N)
- Item_Manutencao ‚Üí Pe√ßa/Servi√ßo (N:1)

**Opera√ß√£o:**
- Linha ‚Üí Rota (1:N)
- Rota ‚Üí Parada_Rota ‚Üí Parada (N:N)
- Viagem ‚Üí Veiculo + Motorista + Rota (N:1)
- Cartao_Bilhetagem ‚Üí Utilizacao_Cartao (1:N)


Para Testar esse banco de dados voce pode ussar esse banco vode pode usar o dbeaver ou mysql workbench, e o docker

```bash# Puxe a imagem oficial do MySQL
docker pull mysql:latest            
# Inicie um cont√™iner MySQL
docker run --name meu-mysql -e MYSQL_ROOT_PASSWORD=minha_senha -p 3306:3306 -d mysql:latest
# Acesse o cont√™iner
docker exec -it meu-mysql bash
# Conecte ao MySQL
mysql -u root -p
# Digite a senha definida (minha_senha)
```
# Crie o banco
```sql
CREATE DATABASE SINATRANS;
USE SINATRANS;
```
# Execute os scripts SQL na ordem
```sql
source /caminho/para/CodigosSql/00_banco.sql;
source /caminho/para/CodigosSql/01_gestao_pessoas.sql;
source /caminho/para/CodigosSql/02_veiculos_frota.sql;
source /caminho/para/CodigosSql/03_operacao_transporte.sql
e por ai vai n√©;     
